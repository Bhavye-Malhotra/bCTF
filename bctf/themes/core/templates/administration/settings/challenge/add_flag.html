<div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="challenge-modal-title">Add Flag </h5>
            <button type="button" id="closeModal" class="close" data-toggle="modal" data-target="#flagAddModal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
                <form method="POST" action="{% url 'administration:add-flag' challenge.pk %}" id="new-flag-from">
                    {% csrf_token %}
                    <input type="hidden" id="id_challenge_id" name="challenge_id" value="{{challenge.pk}}">
                    <input type="text" id="id_flag" name="flag">

                    <button id="submit" type="submit" class="btn btn-primary">Create</button>
                </form>
            </div>
        </div>
    </div>
    
    <script>
    $('document').ready( function() {
        
        function reloadFlags() {
            var modal = $('#flagsModal').modal();
            var challengeID = `{{challenge.pk}}`;
            var formURL = `challenge/${challengeID}/flags`
            $.ajax({
                url: formURL,
                context: document.body
            }).done(function(response) {
                modal.html(response);
            });
        }

        var form_options = {
                target: '#flagAddModal',
                success: function() {
                    $("#flagAddModal").hide();
                    $('.modal-backdrop').remove()
                    reloadFlags();
                 }
            }
            $('#new-flag-from').ajaxForm(form_options);
    
    
    })
    </script>